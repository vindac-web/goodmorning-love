<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Good Morning Love - Dashboard</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ’•</text></svg>">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <style>
        :root {
            --primary: #d63384;
            --primary-hover: #b02a6a;
        }

        body {
            padding: 1rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .nav-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--muted-border-color);
            overflow-x: auto;
                            align-items: center;
                padding: 0.5rem 0;
        }

        .nav-tab {
                padding: 0.75rem 1rem !important;
            cursor: pointer;
            border: none;
                            height: auto !important;
                line-height: normal !important;
                box-shadow: none !important;
            background: none;
                            width: auto !important;
                margin: 0 !important;
                display: inline-block !important;
                font-size: 1rem !important;
            color: var(--color);
            white-space: nowrap;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
        }

        .nav-tab.active {
            border-bottom-color: var(--primary);
            color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .status-grid {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        @media (min-width: 768px) {
            .status-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .status-card {
            padding: 1.5rem;
            border-radius: 0.5rem;
            background: var(--card-background-color);
            border: 1px solid var(--muted-border-color);
        }

        .status-card h3 {
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1rem;
            color: var(--muted-color);
        }

        .status-value {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .question-item {
            display: flex;
            gap: 1rem;
            align-items: start;
            margin-bottom: 1rem;
            padding: 1rem;
            border: 1px solid var(--muted-border-color);
            border-radius: 0.5rem;
        }

        .question-number {
            font-weight: 600;
            min-width: 2rem;
        }

        .question-text {
            flex: 1;
        }

        .question-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-sm {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
        }

        .history-entry {
            padding: 1rem;
            border: 1px solid var(--muted-border-color);
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .history-type {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .history-type.question {
            background: #e7f3ff;
            color: #0969da;
        }

        .history-type.reply {
            background: #dafbe1;
            color: #1a7f37;
        }

        .history-type.girlfriend_message {
            background: #ffeff7;
            color: #bf3989;
        }

        .history-status {
            font-size: 0.875rem;
            color: var(--muted-color);
        }

        .history-message {
            color: var(--muted-color);
            font-size: 0.875rem;
        }

        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            background: var(--card-background-color);
            border: 1px solid var(--muted-border-color);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        .toast.success {
            border-color: #1a7f37;
            background: #dafbe1;
            color: #1a7f37;
        }

        .toast.error {
            border-color: #cf222e;
            background: #ffebe9;
            color: #cf222e;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .template-preview {
            padding: 1rem;
            background: var(--code-background-color);
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 0.875rem;
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .hidden {
            display: none;
        }

        header {
            margin-bottom: 2rem;
        }

        header h1 {
            margin-bottom: 0.5rem;
        }

        .logout-btn {
            float: right;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="login-screen">
            <main>
                <article style="max-width: 400px; margin: 4rem auto;">
                    <header>
                        <h1>Dashboard Login</h1>
                        <p>Enter your password to access the dashboard</p>
                    </header>
                    <form id="login-form">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required autofocus>
                        <button type="submit">Login</button>
                    </form>
                </article>
            </main>
        </div>

        <div id="dashboard-screen" class="hidden">
            <header>
                <h1>Good Morning Love Dashboard ðŸ’•</h1>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </header>

            <nav class="nav-tabs">
                <button class="nav-tab active" data-tab="status">Status</button>
                <button class="nav-tab" data-tab="questions">Questions</button>
                <button class="nav-tab" data-tab="schedule">Schedule</button>
                <button class="nav-tab" data-tab="templates">Templates</button>
                <button class="nav-tab" data-tab="history">History</button>
            </nav>

            <div id="status-tab" class="tab-content active">
                <h2>App Status</h2>
                <div class="status-grid">
                    <div class="status-card">
                        <h3>Morning Questions Time</h3>
                        <div class="status-value" id="status-morning-time">--:--</div>
                    </div>
                    <div class="status-card">
                        <h3>Girlfriend Message Time</h3>
                        <div class="status-value" id="status-girlfriend-time">--:--</div>
                    </div>
                    <div class="status-card">
                        <h3>Timezone</h3>
                        <div class="status-value" id="status-timezone">---</div>
                    </div>
                    <div class="status-card">
                        <h3>Status</h3>
                        <div class="status-value">âœ… Running</div>
                    </div>
                </div>

                <h3>Phone Numbers</h3>
                <p><strong>My Number:</strong> <span id="status-my-phone">+1 ***-***-****</span></p>
                <p><strong>Girlfriend Number:</strong> <span id="status-gf-phone">+1 ***-***-****</span></p>

                <h3>Channel Preferences</h3>
                <p><strong>My Channels:</strong> <span id="status-my-channels">---</span></p>
                <p><strong>Girlfriend Channels:</strong> <span id="status-gf-channels">---</span></p>

                <h3>Quick Actions</h3>
                <button onclick="sendTestQuestions()">Send Questions Now</button>
                <button onclick="sendVoiceMessage()" class="secondary">Send Voice Message</button>

                <h3>Test Girlfriend Message</h3>
                <label for="test-media-url">Media URL (optional)</label>
                <input type="url" id="test-media-url" placeholder="https://example.com/image.gif" oninput="updateMediaPreview()">
                <button onclick="loadRandomGif()" class="secondary">Random Love GIF</button>
                <div id="media-preview" class="hidden" style="margin-top: 1rem;"></div>
                <button onclick="sendTestGirlfriend()" style="margin-top: 1rem;">Send Test Girlfriend Message</button>
            </div>

            <div id="questions-tab" class="tab-content">
                <h2>Morning Questions</h2>
                <div id="questions-list"></div>
                <button onclick="addQuestion()">Add Question</button>
                <button onclick="saveQuestions()" class="contrast">Save Questions</button>
            </div>

            <div id="schedule-tab" class="tab-content">
                <h2>Schedule Settings</h2>
                <form id="schedule-form">
                    <label for="morning-time">Morning Questions Time (24-hour format)</label>
                    <input type="time" id="morning-time" required>

                    <label for="girlfriend-time">Girlfriend Message Time (24-hour format)</label>
                    <input type="time" id="girlfriend-time" required>

                    <label for="timezone">Timezone</label>
                    <select id="timezone" required>
                        <option value="America/New_York">Eastern Time (ET)</option>
                        <option value="America/Chicago">Central Time (CT)</option>
                        <option value="America/Denver">Mountain Time (MT)</option>
                        <option value="America/Phoenix">Arizona Time (MST)</option>
                        <option value="America/Los_Angeles">Pacific Time (PT)</option>
                        <option value="America/Anchorage">Alaska Time (AKT)</option>
                        <option value="Pacific/Honolulu">Hawaii Time (HST)</option>
                    </select>

                    <button type="submit">Save Schedule</button>
                </form>
                <p><small>Note: The app will need to be restarted for schedule changes to take effect.</small></p>
            </div>

            <div id="templates-tab" class="tab-content">
                <h2>Message Templates</h2>
                <p>Use <code>{loveNote}</code>, <code>{gratitude}</code>, and <code>{encouragement}</code> as placeholders.</p>
                <div id="templates-list"></div>
                <button onclick="addTemplate()">Add Template</button>
                <button onclick="saveTemplates()" class="contrast">Save Templates</button>
            </div>

            <div id="history-tab" class="tab-content">
                <h2>Message History</h2>
                <div id="history-list"></div>
            </div>
        </div>
    </div>

    <script src="/dashboard/app.js"></script>
</body>
</html>
